# ADR 0002 — Governance لنتائج التحليل السببي

**التاريخ:** 2025-09-30

**الحالة:** مقترح

## السياق

يتطلب دمج محرك التحليل السببي في نظام Zebra سياسة واضحة للتحكم في كيفية استخدام مخرجاته. نظرًا لأن هذه المخرجات يمكن أن تؤدي إلى قرارات تلقائية (مثل تعديل الكود، أو تغيير التكوين)، فمن الضروري وجود ضوابط قوية لضمان الاستقرار والأمان وتجنب النتائج غير المرغوب فيها.

## القرار

سيتم تصنيف جميع التوصيات الصادرة عن المحرك السببي إلى ثلاث فئات:

1.  **Informational (للمعلومات):** نتائج لا تتطلب أي إجراء فوري، مثل اكتشاف ارتباطات جديدة أو تحديثات طفيفة في ثقة الحواف السببية. يتم تسجيلها للمراجعة البشرية.
2.  **Suggested (مقترح):** توصيات قد تتطلب إجراءً، ولكنها تحتاج إلى تحليل بشري إضافي. مثال: "قد يؤدي زيادة عدد العمال إلى تقليل زمن الاستجابة."
3.  **Actionable (قابل للتنفيذ):** توصيات عالية الثقة يمكن أن تؤدي إلى إجراء تلقائي بعد اجتياز سلسلة من عمليات التحقق.

**لن يتم تطبيق أي توصية "Actionable" تلقائيًا في بيئة الإنتاج دون استيفاء الشروط التالية:**

1.  **التحققات التلقائية (Automated Checks):**
    *   **توافق خط الأساس (Baseline Consistency):** يجب أن يكون تقدير ATE (متوسط تأثير المعالجة) ضمن نطاق متوقع مقارنة بالبيانات التاريخية أو التجارب السابقة.
    *   **الصلابة (Robustness):** يجب أن يتجاوز متوسط ثقة الحواف السببية في الرسم البياني المستخدم عتبة محددة مسبقًا (e.g., `edge_confidence >= 0.6`). يجب أيضًا إجراء تحليل حساسية للتحقق من عدم تأثر النتائج بشكل كبير بالمتغيرات المربكة غير الملحوظة.
    *   **السلامة (Safety):** يجب ألا تشير المحاكاة إلى أي تأثير سلبي كبير على مؤشرات الأداء الرئيسية الأخرى (KPIs).

2.  **الموافقة البشرية (Human Approval):** يجب مراجعة جميع التوصيات "Actionable" والموافقة عليها من قبل مهندس معين قبل نشرها. يمكن أتمتة هذه الموافقة في المستقبل لسيناريوهات محددة جيدًا ومنخفضة المخاطر.

**آلية النشر والتراجع (Deployment & Rollback):**

*   جميع التغييرات الناتجة عن التوصيات "Actionable" ستُنفذ كنشر **canary** (تجريبي) على مجموعة فرعية من حركة المرور أو الأنظمة.
*   يجب أن يكون لكل نشر آلية **rollback تلقائية** يتم تفعيلها إذا تجاوزت مقاييس الأداء الرئيسية (مثل معدل الخطأ أو زمن الاستجابة) عتبات محددة مسبقًا خلال فترة المراقبة.

## المبررات

*   **الأمان أولاً:** الهدف الأساسي هو منع النظام من إحداث ضرر لنفسه أو للبيئة التي يعمل فيها.
*   **بناء الثقة:** تضمن المراجعة البشرية والضوابط التلقائية أن النظام يتصرف بشكل متوقع ويمكن الوثوق به.
*   **التطور التدريجي:** يسمح هذا النهج بالتطور التدريجي نحو الاستقلالية الكاملة مع تقليل المخاطر.

## العواقب

*   **زيادة الحمل على المراجعين البشريين:** في البداية، ستتطلب هذه السياسة تدخلاً بشريًا متكررًا.
*   **بطء اتخاذ القرار:** قد تكون عملية اتخاذ القرار أبطأ من نظام مستقل تمامًا، ولكنه مقايض ضروري لضمان السلامة.
*   **الحاجة إلى بنية تحتية قوية للمراقبة:** يتطلب تطبيق هذه السياسة وجود نظام مراقبة قوي لتتبع مؤشرات الأداء الرئيسية وتفعيل آليات التراجع.